[gd_scene load_steps=169 format=2]

[ext_resource path="res://addons/rmsmartshape/shapes/point_array.gd" type="Script" id=1]
[ext_resource path="res://addons/rmsmartshape/normal_range.gd" type="Script" id=2]
[ext_resource path="res://addons/rmsmartshape/materials/edge_material_metadata.gd" type="Script" id=3]
[ext_resource path="res://game/levels/city/street_curve.tres" type="Resource" id=4]
[ext_resource path="res://assets/textures/bolt/bolt_car.png" type="Texture" id=5]
[ext_resource path="res://assets/textures/weapons/bullet.png" type="Texture" id=6]
[ext_resource path="res://assets/textures/atlas_arena_objects.png" type="Texture" id=7]
[ext_resource path="res://assets/theme/main_theme.tres" type="Theme" id=8]
[ext_resource path="res://addons/rmsmartshape/shapes/point.gd" type="Script" id=9]
[ext_resource path="res://game/levels/city/res/pav_dirt_material.tres" type="Material" id=10]
[ext_resource path="res://addons/rmsmartshape/materials/edge_material.gd" type="Script" id=11]
[ext_resource path="res://addons/rmsmartshape/materials/shape_material.gd" type="Script" id=12]
[ext_resource path="res://addons/rmsmartshape/shapes/shape_closed.gd" type="Script" id=13]
[ext_resource path="res://assets/textures/light.png" type="Texture" id=14]
[ext_resource path="res://addons/rmsmartshape/vertex_properties.gd" type="Script" id=15]
[ext_resource path="res://game/levels/city/tex/tile_sidewalk_small.png" type="Texture" id=16]
[ext_resource path="res://_rezerva/backgrounds/level_background_pixelate_screen.gdshader" type="Shader" id=17]
[ext_resource path="res://game/levels/sha/level_floor_background_dancefloor.gdshader" type="Shader" id=18]
[ext_resource path="res://_rezerva/_zaloga_shaderjev/originali_uporabljanega/bolt_wiggle_texture.gdshader" type="Shader" id=19]
[ext_resource path="res://addons/rmsmartshape/shapes/shape_open.gd" type="Script" id=20]
[ext_resource path="res://game/arena/TilemapEdge.gd" type="Script" id=21]
[ext_resource path="res://game/levels/city/res/street_dirt_material.tres" type="Material" id=22]
[ext_resource path="res://_obs/mountain_edge_corner_2.png" type="Texture" id=23]
[ext_resource path="res://game/levels/shape/mount_shade.tres" type="Resource" id=24]
[ext_resource path="res://assets/resources/tilesets/tileset_arena_floor.tres" type="TileSet" id=25]
[ext_resource path="res://game/levels/sha/terrain_dither.tres" type="Material" id=26]
[ext_resource path="res://assets/resources/tilesets/tileset_arena_edge.tres" type="TileSet" id=27]
[ext_resource path="res://game/levels/RaceTrack.gd" type="Script" id=28]
[ext_resource path="res://game/levels/city/tex/tilemap_streets.png" type="Texture" id=29]
[ext_resource path="res://assets/shaders/dither/pallete_bw_wide.png" type="Texture" id=30]
[ext_resource path="res://game/levels/sha/level_texture_shader.tres" type="Material" id=31]
[ext_resource path="res://game/levels/city/LevelCity.gd" type="Script" id=32]
[ext_resource path="res://game/levels/BoltTracker.gd" type="Script" id=33]
[ext_resource path="res://assets/shaders/dither/bayer2tile16.png" type="Texture" id=34]
[ext_resource path="res://game/levels/sha/level_dropshadows_screen.gdshader" type="Shader" id=36]
[ext_resource path="res://assets/resources/tilesets/tileset_arena_elements.tres" type="TileSet" id=37]
[ext_resource path="res://game/levels/rockys/_obs/mountain_edge_corner_inside.png" type="Texture" id=38]
[ext_resource path="res://game/levels/rockys/tex/desert_top.png" type="Texture" id=40]
[ext_resource path="res://game/levels/sha/shader_texture/terrain_dirt_material.tres" type="Material" id=41]
[ext_resource path="res://game/levels/rockys/tex/desert_edge.png" type="Texture" id=42]
[ext_resource path="res://game/levels/sha/shader_texture/TerrainTextureRect.tscn" type="PackedScene" id=47]
[ext_resource path="res://assets/resources/tilesets/tileset_streets.tres" type="TileSet" id=48]
[ext_resource path="res://game/levels/Building.tscn" type="PackedScene" id=52]
[ext_resource path="res://game/arena/StartLights.tscn" type="PackedScene" id=53]

[sub_resource type="OpenSimplexNoise" id=542]
seed = 17
octaves = 5
period = 0.1
persistence = 0.0
lacunarity = 4.0

[sub_resource type="NoiseTexture" id=614]
seamless = true
noise = SubResource( 542 )

[sub_resource type="Gradient" id=524]
interpolation_mode = 1
offsets = PoolRealArray( 0, 0.171598, 0.420824, 0.509761, 0.590022, 0.698482 )
colors = PoolColorArray( 0, 0, 0, 1, 0.111714, 0.111714, 0.111714, 1, 0.223427, 0.223427, 0.223427, 1, 0.472885, 0.472885, 0.472885, 1, 0.698482, 0.698482, 0.698482, 1, 0.881836, 0.881836, 0.881836, 1 )

[sub_resource type="GradientTexture" id=615]
gradient = SubResource( 524 )

[sub_resource type="Gradient" id=601]
offsets = PoolRealArray( 0, 0.650735 )
colors = PoolColorArray( 0.168945, 0.168945, 0.168945, 1, 1, 1, 1, 1 )

[sub_resource type="GradientTexture" id=616]
gradient = SubResource( 601 )

[sub_resource type="ShaderMaterial" id=603]
shader = ExtResource( 18 )
shader_param/change_colors = false
shader_param/color_1 = Color( 0, 0, 0, 0 )
shader_param/new_color_1 = Color( 0, 0, 0, 0 )
shader_param/color_2 = Color( 0, 0, 0, 0 )
shader_param/new_color_2 = Color( 0, 0, 0, 0 )
shader_param/color_3 = Color( 0, 0, 0, 0 )
shader_param/new_color_3 = Color( 0, 0, 0, 0 )
shader_param/color_to_transparent = Color( 0, 0, 0, 0 )
shader_param/color_to_noise = Color( 0, 0, 0, 0 )
shader_param/node_size = Vector2( 320, 320 )
shader_param/ad_noise = true
shader_param/shade_noise = true
shader_param/pixelate_noise = true
shader_param/pixel_size_multiplier = 2.0
shader_param/pixel_offset = Vector2( 0.5, 0.5 )
shader_param/speed_x = 0.0
shader_param/speed_y = 0.05
shader_param/speed_scale = 0.05
shader_param/shade_all_colors = true
shader_param/noise = SubResource( 614 )
shader_param/noise_color_ramp = SubResource( 615 )
shader_param/shades_color_ramp = SubResource( 616 )

[sub_resource type="TileSet" id=9238]
0/name = "tile_sidewalk_small.png 0"
0/texture = ExtResource( 16 )
0/tex_offset = Vector2( 0, 0 )
0/modulate = Color( 1, 1, 1, 1 )
0/region = Rect2( 0, 0, 160, 160 )
0/tile_mode = 0
0/occluder_offset = Vector2( 0, 0 )
0/navigation_offset = Vector2( 0, 0 )
0/shape_offset = Vector2( 0, 0 )
0/shape_transform = Transform2D( 1, 0, 0, 1, 0, 0 )
0/shape_one_way = false
0/shape_one_way_margin = 0.0
0/shapes = [  ]
0/z_index = 0

[sub_resource type="Resource" id=9842]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9843]
script = ExtResource( 9 )
position = Vector2( 549, 1663.96 )
point_in = Vector2( 0, 0 )
point_out = Vector2( 0, 0 )
properties = SubResource( 9842 )

[sub_resource type="Resource" id=9844]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9845]
script = ExtResource( 9 )
position = Vector2( 1119.42, 188.902 )
point_in = Vector2( 0, 0 )
point_out = Vector2( 0, 0 )
properties = SubResource( 9844 )

[sub_resource type="Resource" id=9846]
script = ExtResource( 15 )
texture_idx = -2
flip = false
width = 1.0

[sub_resource type="Resource" id=9847]
script = ExtResource( 9 )
position = Vector2( 297.607, 388.178 )
point_in = Vector2( 114.985, 169.605 )
point_out = Vector2( 0, 0 )
properties = SubResource( 9846 )

[sub_resource type="Resource" id=9848]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9849]
script = ExtResource( 9 )
position = Vector2( 1111.63, 714.087 )
point_in = Vector2( 0, 0 )
point_out = Vector2( 0, 0 )
properties = SubResource( 9848 )

[sub_resource type="Resource" id=9850]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9851]
script = ExtResource( 9 )
position = Vector2( 1567.69, 719.127 )
point_in = Vector2( 0, 0 )
point_out = Vector2( 0, 0 )
properties = SubResource( 9850 )

[sub_resource type="Resource" id=9852]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9853]
script = ExtResource( 9 )
position = Vector2( 1568.6, 194.038 )
point_in = Vector2( 0, 0 )
point_out = Vector2( 0, 0 )
properties = SubResource( 9852 )

[sub_resource type="Resource" id=9854]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9855]
script = ExtResource( 9 )
position = Vector2( 2367.82, 194.371 )
point_in = Vector2( 0, 0 )
point_out = Vector2( 0, 0 )
properties = SubResource( 9854 )

[sub_resource type="Resource" id=9856]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9857]
script = ExtResource( 9 )
position = Vector2( 2368.6, 823.898 )
point_in = Vector2( 0, 0 )
point_out = Vector2( 0, 0 )
properties = SubResource( 9856 )

[sub_resource type="Resource" id=9858]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9859]
script = ExtResource( 9 )
position = Vector2( 1002.88, 1239.81 )
point_in = Vector2( 0, 0 )
point_out = Vector2( 0, 0 )
properties = SubResource( 9858 )

[sub_resource type="Resource" id=9860]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9861]
script = ExtResource( 9 )
position = Vector2( 545.664, 827.33 )
point_in = Vector2( 0, 0 )
point_out = Vector2( 0, 0 )
properties = SubResource( 9860 )

[sub_resource type="Resource" id=9862]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9863]
script = ExtResource( 9 )
position = Vector2( 684.07, 189.688 )
point_in = Vector2( 0, 0 )
point_out = Vector2( 0, 0 )
properties = SubResource( 9862 )

[sub_resource type="Resource" id=9864]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9865]
script = ExtResource( 9 )
position = Vector2( 606.825, 212.057 )
point_in = Vector2( 0, 0 )
point_out = Vector2( 0, 0 )
properties = SubResource( 9864 )

[sub_resource type="Resource" id=9866]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9867]
script = ExtResource( 9 )
position = Vector2( 1481.54, 1250.76 )
point_in = Vector2( 0, 0 )
point_out = Vector2( 0, 0 )
properties = SubResource( 9866 )

[sub_resource type="Resource" id=9868]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9869]
script = ExtResource( 9 )
position = Vector2( 2209, 1218 )
point_in = Vector2( 162, -62 )
point_out = Vector2( -162, 62 )
properties = SubResource( 9868 )

[sub_resource type="Resource" id=9870]
script = ExtResource( 1 )
_points = {
0: SubResource( 9843 ),
3: SubResource( 9845 ),
4: SubResource( 9847 ),
10: SubResource( 9849 ),
11: SubResource( 9851 ),
12: SubResource( 9853 ),
13: SubResource( 9855 ),
14: SubResource( 9857 ),
17: SubResource( 9859 ),
19: SubResource( 9861 ),
22: SubResource( 9863 ),
24: SubResource( 9865 ),
25: SubResource( 9867 ),
26: SubResource( 9869 )
}
_point_order = [ 0, 19, 4, 24, 22, 3, 10, 11, 12, 13, 14, 26, 25, 17 ]
_constraints = {
}
_next_key = 27
_material_overrides = {
}

[sub_resource type="TileSet" id=9841]
0/name = "tilemap_streets.png 0"
0/texture = ExtResource( 29 )
0/tex_offset = Vector2( 0, 0 )
0/modulate = Color( 1, 1, 1, 1 )
0/region = Rect2( 0, 0, 1920, 960 )
0/tile_mode = 2
0/autotile/icon_coordinate = Vector2( 0, 0 )
0/autotile/tile_size = Vector2( 320, 320 )
0/autotile/spacing = 0
0/autotile/occluder_map = [  ]
0/autotile/navpoly_map = [  ]
0/autotile/priority_map = [  ]
0/autotile/z_index_map = [  ]
0/occluder_offset = Vector2( 0, 0 )
0/navigation_offset = Vector2( 0, 0 )
0/shape_offset = Vector2( 0, 0 )
0/shape_transform = Transform2D( 1, 0, 0, 1, 0, 0 )
0/shape_one_way = false
0/shape_one_way_margin = 0.0
0/shapes = [  ]
0/z_index = 0

[sub_resource type="ShaderMaterial" id=619]
shader = ExtResource( 36 )
shader_param/node_size = Vector2( 320, 320 )
shader_param/screen_size = Vector2( 640, 360 )
shader_param/casting_color_1 = Color( 1, 1, 0.0117647, 1 )
shader_param/casting_color_2 = Color( 0.729412, 0.729412, 0.435294, 1 )
shader_param/casting_color_3 = Color( 0, 1, 0, 0 )
shader_param/casting_object_on_floor = true
shader_param/shadow_color = Color( 0, 0, 0, 0.54902 )
shader_param/shadow_distance = 60
shader_param/shadow_rotation_deg = 180.0
shader_param/pixel_scale = 10.0
shader_param/switch_cast_and_receive = false
shader_param/new_casting_color = Color( 0, 0, 0, 0 )
shader_param/new_receiving_color = Color( 0, 0, 0, 0 )

[sub_resource type="ShaderMaterial" id=1126]
shader = ExtResource( 17 )
shader_param/node_size = Vector2( 1648, 1032 )
shader_param/pixelate = false
shader_param/pixel_size_multiplier = 8.0
shader_param/pixel_offset = Vector2( 0, 0 )
shader_param/speed_x = 0.0
shader_param/speed_y = 0.0
shader_param/speed_scale = 0.0

[sub_resource type="Shader" id=5158]
code = "shader_type canvas_item;

uniform float pixelFactor : hint_range(0, 10) = 0.5;

void fragment() {
	// pixel number naj bo proporcionalna to sprite resolution ... multiply pixel texture width sprite size
	vec2 pixelNumber = vec2(textureSize(SCREEN_TEXTURE, 0)) / pixelFactor; // Å¡tevilo pixlov
//	vec2 pixelatedUV = round(UV * pixelFactor) / pixelFactor; // snaping (round) to pixelsize and dividing to ge back to 0 - 1 interval
//	vec2 pixelatedUV = round(UV * pixelNumber) / pixelNumber; // snaping (round) to pixelsize and dividing to ge back to 0 - 1 interval
	vec2 pixelatedUV = (floor(SCREEN_UV * pixelNumber) + 0.5) / pixelNumber; // These pixelizations are aligned to the top left. If you do a bit of trickery with offsets, you can centre them. 
//	COLOR = vec4(pixelatedUV.x, pixelatedUV.y, 0, 1);
	COLOR = texture(SCREEN_TEXTURE, pixelatedUV);
}


"

[sub_resource type="ShaderMaterial" id=5159]
shader = SubResource( 5158 )
shader_param/pixelFactor = 4.0

[sub_resource type="Shader" id=5160]
code = "/* 
This shader is under MIT license. Feel free to use, improve and 
change this shader according to your needs and consider sharing 
the modified result to godotshaders.com.
*/

shader_type canvas_item;

uniform bool exclude_colors = false;
uniform vec4 exclude_color_1: hint_color = vec4(0);
uniform vec4 change_color_1: hint_color = vec4(0);
uniform vec4 exclude_color_2: hint_color = vec4(0);
uniform vec4 change_color_2: hint_color = vec4(0);
uniform vec4 exclude_color_3: hint_color = vec4(0);
uniform vec4 change_color_3: hint_color = vec4(0);
uniform vec2 screen_size = vec2(640.0, 360.0);


uniform sampler2D u_dither_tex;
uniform sampler2D u_color_tex;

uniform int u_bit_depth;
uniform float u_contrast;
uniform float u_offset;
uniform int u_dither_size;


uniform float pixelFactor : hint_range(0, 10) = 0.5;

void fragment() {


//void fragment() 
//{
	// sample the screen texture at the desired output resolution (according to u_dither_size)
	// this will effectively pixelate the resulting output
//	vec2 pixel_size = SCREEN_PIXEL_SIZE;
	vec2 screen_pixel_size = screen_size / float(u_dither_size);
//	vec2 screen_size = vec2(textureSize(SCREEN_TEXTURE, 0)) / float(u_dither_size);
	vec2 screen_sample_uv = floor(SCREEN_UV * screen_size) / screen_size;
	vec3 screen_col = texture(SCREEN_TEXTURE, screen_sample_uv).rgb;
	
	// calculate pixel luminosity (https://stackoverflow.com/questions/596216/formula-to-determine-brightness-of-rgb-color)
	float lum = (screen_col.r * 0.299) + (screen_col.g * 0.587) + (screen_col.b * 0.114);
	
	// adjust with contrast and offset parameters
	float contrast = u_contrast;
	lum = (lum - 0.5 + u_offset) * contrast + 0.5;
	lum = clamp(lum, 0.0, 1.0);
	
	// reduce luminosity bit depth to give a more banded visual if desired	
	float bits = float(u_bit_depth);
	lum = floor(lum * bits) / bits;
	
	// to support multicolour palettes, we want to dither between the two colours on the palette
	// which are adjacent to the current pixel luminosity.
	// to do this, we need to determine which 'band' lum falls into, calculate the upper and lower
	// bound of that band, then later we will use the dither texture to pick either the upper or 
	// lower colour.
	
	// get the palette texture size mapped so it is 1px high (so the x value however many colour bands there are)
	ivec2 col_size = textureSize(u_color_tex, 0);
	col_size /= col_size.y;
	
	float col_x = float(col_size.x) - 1.0; // colour boundaries is 1 less than the number of colour bands
	float col_texel_size = 1.0 / col_x; // the size of one colour boundary
	
	lum = max(lum - 0.00001, 0.0); // makes sure our floor calculation below behaves when lum == 1.0
	float lum_lower = floor(lum * col_x) * col_texel_size;
	float lum_upper = (floor(lum * col_x) + 1.0) * col_texel_size;
	float lum_scaled = lum * col_x - floor(lum * col_x); // calculates where lum lies between the upper and lower bound
	
	// map the dither texture onto the screen. there are better ways of doing this that makes the dither pattern 'stick'
	// with objects in the 3D world, instead of being mapped onto the screen. see lucas pope's details posts on how he 
	// achieved this in Obra Dinn: https://forums.tigsource.com/index.php?topic=40832.msg1363742#msg1363742
	ivec2 noise_size = textureSize(u_dither_tex, 0);
	vec2 inv_noise_size = vec2(1.0 / float(noise_size.x), 1.0 / float(noise_size.y));
	
	
//	vec2 noise_uv = pixelatedUV * inv_noise_size * vec2(float(screen_pixel_size.x), float(screen_pixel_size.y));
	vec2 noise_uv = UV * inv_noise_size * vec2(float(screen_pixel_size.x), float(screen_pixel_size.y));
	
	
//	vec2 noise_uv = UV * inv_noise_size * vec2(float(screen_size.x), float(screen_size.y));
	float threshold = texture(u_dither_tex, noise_uv).r;
	
	// adjust the dither slightly so min and max aren't quite at 0.0 and 1.0
	// otherwise we wouldn't get fullly dark and fully light dither patterns at lum 0.0 and 1.0
	threshold = threshold * 0.99 + 0.005;
	
	// the lower lum_scaled is, the fewer pixels will be below the dither threshold, and thus will use the lower bound colour,
	// and vice-versa
	float ramp_val = lum_scaled < threshold ? 0.0f : 1.0f;
	// sample at the lower bound colour if ramp_val is 0.0, upper bound colour if 1.0
	float col_sample = mix(lum_lower, lum_upper, ramp_val);
	
	
//	if (length(screen_col - exclude_color_1.rgb) < 0.01){final_col = exclude_color_1.rgb;}	
//	if (length(screen_col - exclude_color_2.rgb) < 0.01){final_col = exclude_color_2.rgb;}
//	if (length(screen_col - exclude_color_3.rgb) < 0.01){final_col = exclude_color_3.rgb;}	
	vec3 final_col;
//	if (exclude_colors == true){
//		// exclude colors
//		if (length(screen_col - exclude_color_1.rgb) < 0.01){final_col = screen_col;}	
//		if (length(screen_col - exclude_color_2.rgb) < 0.01){final_col = screen_col;}
//		if (length(screen_col - exclude_color_3.rgb) < 0.01){final_col = screen_col;}	
//	} else {
//		// return the final colour!
//		final_col = texture(u_color_tex, vec2(col_sample, 0.5)).rgb;
//	}
	
	if (exclude_colors == true){
		// exclude colors
		if (length(screen_col - exclude_color_1.rgb) < 0.01){COLOR.a = 0.0;}	
		if (length(screen_col - exclude_color_2.rgb) < 0.01){COLOR.a = 0.0;}
		if (length(screen_col - exclude_color_3.rgb) < 0.01){COLOR.a = 0.0;}	
//		if (length(screen_col - exclude_color_1.rgb) < 0.01){COLOR = change_color_1;}	
//		if (length(screen_col - exclude_color_2.rgb) < 0.01){COLOR = change_color_2;}
//		if (length(screen_col - exclude_color_3.rgb) < 0.01){COLOR = change_color_1;}
//		if (length(screen_col) < 0.01){COLOR.rgb = texture(u_color_tex, vec2(col_sample, 0.5)).rgb;}
//	} else {
//		final_col = texture(u_color_tex, vec2(col_sample, 0.5)).rgb;
//		COLOR.rgb = final_col;
	}
	final_col = texture(u_color_tex, vec2(col_sample, 0.5)).rgb;
	COLOR.rgb = final_col;
	COLOR.rgb = final_col;
}"

[sub_resource type="ShaderMaterial" id=5161]
shader = SubResource( 5160 )
shader_param/exclude_colors = false
shader_param/exclude_color_1 = Color( 1, 1, 0, 1 )
shader_param/change_color_1 = Color( 0, 0, 0, 0 )
shader_param/exclude_color_2 = Color( 0.368627, 1, 0.662745, 1 )
shader_param/change_color_2 = Color( 0, 0, 0, 0 )
shader_param/exclude_color_3 = Color( 0.505882, 0.505882, 0.505882, 1 )
shader_param/change_color_3 = Color( 1, 0, 1, 1 )
shader_param/screen_size = Vector2( 1648, 1032 )
shader_param/u_bit_depth = 128
shader_param/u_contrast = 1.0
shader_param/u_offset = 0.0
shader_param/u_dither_size = 2
shader_param/pixelFactor = 3.25
shader_param/u_dither_tex = ExtResource( 34 )
shader_param/u_color_tex = ExtResource( 30 )

[sub_resource type="Shader" id=2924]
code = "shader_type canvas_item;
/**
 * This shader fixes normal textures looking wrong when used with SmartShape2D.
 * See: https://github.com/SirRamEsq/SmartShape2D/blob/master/addons/rmsmartshape/documentation/Normals.md
 */

varying mat2 NORMAL_MATRIX;

void vertex() {
	NORMAL_MATRIX = mat2(COLOR.rg, COLOR.ba) * 2.0 - mat2(vec2(1.0), vec2(1.0));
}

void fragment() {
	NORMAL.xy = NORMAL_MATRIX * NORMAL.xy;
	COLOR = texture(TEXTURE, UV);
}"

[sub_resource type="ShaderMaterial" id=2925]
shader = SubResource( 2924 )

[sub_resource type="OpenSimplexNoise" id=620]
seed = 1
octaves = 4
period = 90.5
persistence = 0.354
lacunarity = 3.58

[sub_resource type="NoiseTexture" id=116]
width = 9
height = 9
seamless = true
noise = SubResource( 620 )

[sub_resource type="ShaderMaterial" id=621]
shader = ExtResource( 19 )
shader_param/noise_factor = 0.0
shader_param/speed = 0.0
shader_param/noise_texture = SubResource( 116 )

[sub_resource type="RectangleShape2D" id=622]
extents = Vector2( 144, 4 )

[sub_resource type="RectangleShape2D" id=514]
extents = Vector2( 272, 4 )

[sub_resource type="AtlasTexture" id=515]
atlas = ExtResource( 7 )
region = Rect2( 32, 16, 32, 8 )

[sub_resource type="RectangleShape2D" id=2923]
extents = Vector2( 160, 4 )

[sub_resource type="AtlasTexture" id=623]
atlas = ExtResource( 7 )
region = Rect2( 0, 16, 32, 8 )

[sub_resource type="Curve2D" id=8635]
_data = {
"points": PoolVector2Array(  )
}

[sub_resource type="NavigationPolygon" id=6258]
vertices = PoolVector2Array( 2416, 288, 2448, 584, 2336, 1248, 2016, 656, 1960, 400, 2296, 176, 2008, 1352, 1944, 936, 1384, 176, 800, 344, 296, 152, 576, 608, 160, 488, 416, 1064, 616, 856, 704, 1120, 736, 1312, 952, 1208, 1200, 1240, 1472, 1224, 1880, 1080, 1616, 888, 1232, 1024, 960, 904, 1008, 648, 1480, 688, 1696, 784, 1848, 888, 1856, 760 )
polygons = [ PoolIntArray( 0, 1, 2, 3, 4, 5 ), PoolIntArray( 3, 2, 6, 7 ), PoolIntArray( 8, 5, 4, 9 ), PoolIntArray( 10, 8, 9 ), PoolIntArray( 10, 9, 11, 12 ), PoolIntArray( 13, 12, 11, 14 ), PoolIntArray( 13, 14, 15, 16 ), PoolIntArray( 16, 15, 17 ), PoolIntArray( 6, 16, 17, 18 ), PoolIntArray( 6, 18, 19 ), PoolIntArray( 6, 19, 20 ), PoolIntArray( 21, 22, 23, 24, 25, 26 ), PoolIntArray( 27, 21, 26, 28 ), PoolIntArray( 7, 27, 28, 3 ), PoolIntArray( 6, 20, 7 ) ]
outlines = [ PoolVector2Array( 296, 152, 160, 488, 416, 1064, 736, 1312, 2008, 1352, 2336, 1248, 2448, 584, 2416, 288, 2296, 176, 1384, 176 ), PoolVector2Array( 576, 608, 800, 344, 1960, 400, 2016, 656, 1856, 760, 1696, 784, 1480, 688, 1008, 648, 960, 904, 1232, 1024, 1616, 888, 1848, 888, 1944, 936, 1880, 1080, 1472, 1224, 1200, 1240, 952, 1208, 704, 1120, 616, 856 ) ]

[sub_resource type="Resource" id=9871]
script = ExtResource( 15 )
texture_idx = -4
flip = false
width = 1.0

[sub_resource type="Resource" id=9872]
script = ExtResource( 9 )
position = Vector2( 1024.76, 329.35 )
point_in = Vector2( -85.4034, -28.4678 )
point_out = Vector2( 133.108, 60.458 )
properties = SubResource( 9871 )

[sub_resource type="Resource" id=9873]
script = ExtResource( 15 )
texture_idx = 1
flip = false
width = 1.0

[sub_resource type="Resource" id=9874]
script = ExtResource( 9 )
position = Vector2( 1052.96, 588.401 )
point_in = Vector2( 177.459, -77.6828 )
point_out = Vector2( -229.739, 97.9574 )
properties = SubResource( 9873 )

[sub_resource type="Resource" id=9875]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9876]
script = ExtResource( 9 )
position = Vector2( 234.214, 340.303 )
point_in = Vector2( -20.934, 63.326 )
point_out = Vector2( 20.934, -63.326 )
properties = SubResource( 9875 )

[sub_resource type="Resource" id=9877]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9878]
script = ExtResource( 9 )
position = Vector2( 1287.51, 337.337 )
point_in = Vector2( -58.0219, -63.9081 )
point_out = Vector2( 58.0219, 63.9081 )
properties = SubResource( 9877 )

[sub_resource type="Resource" id=9879]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9880]
script = ExtResource( 9 )
position = Vector2( 430.67, 534.533 )
point_in = Vector2( 131.889, 103.828 )
point_out = Vector2( -131.889, -103.828 )
properties = SubResource( 9879 )

[sub_resource type="Resource" id=9881]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9882]
script = ExtResource( 9 )
position = Vector2( 695.01, 315.092 )
point_in = Vector2( -167.247, 19.0818 )
point_out = Vector2( 167.247, -19.0818 )
properties = SubResource( 9881 )

[sub_resource type="Resource" id=9883]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9884]
script = ExtResource( 9 )
position = Vector2( 413.272, 306.674 )
point_in = Vector2( -51.072, -12.3471 )
point_out = Vector2( 29.7452, 9.54092 )
properties = SubResource( 9883 )

[sub_resource type="Resource" id=9885]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9886]
script = ExtResource( 9 )
position = Vector2( 695.01, 315.092 )
point_in = Vector2( -167.247, 19.0818 )
point_out = Vector2( 167.247, -19.0818 )
properties = SubResource( 9885 )

[sub_resource type="Resource" id=9887]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9888]
script = ExtResource( 9 )
position = Vector2( 458.17, 384.123 )
point_in = Vector2( -39.2862, -6.73477 )
point_out = Vector2( 46.5822, 5.6123 )
properties = SubResource( 9887 )

[sub_resource type="Resource" id=9889]
script = ExtResource( 1 )
_points = {
4: SubResource( 9872 ),
5: SubResource( 9874 ),
7: SubResource( 9876 ),
8: SubResource( 9878 ),
9: SubResource( 9880 ),
13: SubResource( 9882 ),
14: SubResource( 9884 ),
16: SubResource( 9886 ),
17: SubResource( 9888 )
}
_point_order = [ 13, 4, 8, 5, 9, 7, 14, 17, 16 ]
_constraints = {
[ 13, 16 ]: 15
}
_next_key = 18
_material_overrides = {
}

[sub_resource type="Resource" id=9890]
script = ExtResource( 15 )
texture_idx = -6
flip = false
width = 1.0

[sub_resource type="Resource" id=9891]
script = ExtResource( 9 )
position = Vector2( 527.367, 348.72 )
point_in = Vector2( -99.6374, 60.6815 )
point_out = Vector2( 99.6374, -60.6815 )
properties = SubResource( 9890 )

[sub_resource type="Resource" id=9892]
script = ExtResource( 15 )
texture_idx = -6
flip = false
width = 1.0

[sub_resource type="Resource" id=9893]
script = ExtResource( 9 )
position = Vector2( 527.367, 348.72 )
point_in = Vector2( -99.6374, 60.6815 )
point_out = Vector2( 99.6374, -60.6815 )
properties = SubResource( 9892 )

[sub_resource type="Resource" id=9894]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9895]
script = ExtResource( 9 )
position = Vector2( 1055.85, 334.451 )
point_in = Vector2( -85.4034, -28.4678 )
point_out = Vector2( 85.4034, 28.4678 )
properties = SubResource( 9894 )

[sub_resource type="Resource" id=9896]
script = ExtResource( 15 )
texture_idx = 1
flip = false
width = 1.0

[sub_resource type="Resource" id=9897]
script = ExtResource( 9 )
position = Vector2( 1057.42, 590.324 )
point_in = Vector2( 177.459, -77.6828 )
point_out = Vector2( -177.459, 77.6828 )
properties = SubResource( 9896 )

[sub_resource type="Resource" id=9898]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9899]
script = ExtResource( 9 )
position = Vector2( 473.394, 563.858 )
point_in = Vector2( 44.9492, 75.6645 )
point_out = Vector2( -44.9492, -75.6645 )
properties = SubResource( 9898 )

[sub_resource type="Resource" id=9900]
script = ExtResource( 15 )
texture_idx = -3
flip = false
width = 1.0

[sub_resource type="Resource" id=9901]
script = ExtResource( 9 )
position = Vector2( 229.83, 364.947 )
point_in = Vector2( -2.3811, 69.0519 )
point_out = Vector2( 2.3811, -69.0519 )
properties = SubResource( 9900 )

[sub_resource type="Resource" id=9902]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9903]
script = ExtResource( 9 )
position = Vector2( 1279.8, 329.858 )
point_in = Vector2( -58.0219, -63.9081 )
point_out = Vector2( 58.0219, 63.9081 )
properties = SubResource( 9902 )

[sub_resource type="Resource" id=9904]
script = ExtResource( 15 )
texture_idx = 3
flip = false
width = 1.0

[sub_resource type="Resource" id=9905]
script = ExtResource( 9 )
position = Vector2( 390.158, 304.625 )
point_in = Vector2( -54.7653, -15.874 )
point_out = Vector2( 54.7653, 15.874 )
properties = SubResource( 9904 )

[sub_resource type="Resource" id=9906]
script = ExtResource( 1 )
_points = {
0: SubResource( 9891 ),
3: SubResource( 9893 ),
4: SubResource( 9895 ),
5: SubResource( 9897 ),
6: SubResource( 9899 ),
7: SubResource( 9901 ),
8: SubResource( 9903 ),
9: SubResource( 9905 )
}
_point_order = [ 0, 4, 8, 5, 6, 7, 9, 3 ]
_constraints = {
[ 0, 3 ]: 15
}
_next_key = 9
_material_overrides = {
}

[sub_resource type="Resource" id=1601]
script = ExtResource( 11 )
textures = [ ExtResource( 42 ) ]
texture_normals = [  ]
textures_corner_outer = [ ExtResource( 23 ) ]
textures_corner_inner = [ ExtResource( 38 ) ]
texture_normals_corner_outer = [  ]
texture_normals_corner_inner = [  ]
textures_taper_left = [  ]
textures_taper_right = [  ]
texture_normals_taper_left = [  ]
texture_normals_taper_right = [  ]
randomize_texture = false
use_corner_texture = true
use_taper_texture = true
fit_mode = 0

[sub_resource type="Resource" id=6868]
script = ExtResource( 2 )
begin = 0.0
distance = 360.0
edgeRendering = Vector2( 0, 0 )

[sub_resource type="Resource" id=1602]
script = ExtResource( 3 )
edge_material = SubResource( 1601 )
normal_range = SubResource( 6868 )
weld = true
render = true
z_index = 0
z_as_relative = true
offset = 0.5

[sub_resource type="Resource" id=1603]
script = ExtResource( 12 )
_edge_meta_materials = [ SubResource( 1602 ) ]
fill_textures = [ ExtResource( 40 ) ]
fill_texture_normals = [  ]
fill_texture_z_index = 0
fill_texture_show_behind_parent = false
fill_mesh_offset = 0.0
render_offset = 0.0

[sub_resource type="Resource" id=9907]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9908]
script = ExtResource( 9 )
position = Vector2( -37.0283, -22.2015 )
point_in = Vector2( 0, 0 )
point_out = Vector2( 0, 0 )
properties = SubResource( 9907 )

[sub_resource type="Resource" id=9909]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9910]
script = ExtResource( 9 )
position = Vector2( 1718.96, -22.0075 )
point_in = Vector2( 0, 0 )
point_out = Vector2( 0, 0 )
properties = SubResource( 9909 )

[sub_resource type="Resource" id=9911]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9912]
script = ExtResource( 9 )
position = Vector2( 1725.93, 1069.89 )
point_in = Vector2( 0, 0 )
point_out = Vector2( 0, 0 )
properties = SubResource( 9911 )

[sub_resource type="Resource" id=9913]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9914]
script = ExtResource( 9 )
position = Vector2( -25.1356, 1067.75 )
point_in = Vector2( 0, 0 )
point_out = Vector2( 0, 0 )
properties = SubResource( 9913 )

[sub_resource type="Resource" id=9915]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9916]
script = ExtResource( 9 )
position = Vector2( 1335.7, 763.629 )
point_in = Vector2( -271.724, 172.834 )
point_out = Vector2( 271.724, -172.834 )
properties = SubResource( 9915 )

[sub_resource type="Resource" id=9917]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9918]
script = ExtResource( 9 )
position = Vector2( 1396.57, 105.95 )
point_in = Vector2( 288.651, 40.9813 )
point_out = Vector2( -288.651, -40.9813 )
properties = SubResource( 9917 )

[sub_resource type="Resource" id=9919]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9920]
script = ExtResource( 9 )
position = Vector2( 449.593, 719.517 )
point_in = Vector2( -261.033, -137.198 )
point_out = Vector2( 261.033, 137.198 )
properties = SubResource( 9919 )

[sub_resource type="Resource" id=9921]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9922]
script = ExtResource( 9 )
position = Vector2( 68.601, 335.395 )
point_in = Vector2( -47.3762, -5.65686 )
point_out = Vector2( 47.3762, 5.65686 )
properties = SubResource( 9921 )

[sub_resource type="Resource" id=9923]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9924]
script = ExtResource( 9 )
position = Vector2( -9.29379, 339.061 )
point_in = Vector2( -20.5061, 13.4351 )
point_out = Vector2( 20.5061, -13.4351 )
properties = SubResource( 9923 )

[sub_resource type="Resource" id=9925]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9926]
script = ExtResource( 9 )
position = Vector2( -37.0283, -22.2015 )
point_in = Vector2( 0, 0 )
point_out = Vector2( 0, 0 )
properties = SubResource( 9925 )

[sub_resource type="Resource" id=9927]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9928]
script = ExtResource( 9 )
position = Vector2( 0.864029, 204.122 )
point_in = Vector2( 79.6769, 49.9467 )
point_out = Vector2( -79.6769, -49.9467 )
properties = SubResource( 9927 )

[sub_resource type="Resource" id=9929]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9930]
script = ExtResource( 9 )
position = Vector2( 830.582, 161.618 )
point_in = Vector2( 282.415, 121.162 )
point_out = Vector2( -282.415, -121.162 )
properties = SubResource( 9929 )

[sub_resource type="Resource" id=9931]
script = ExtResource( 15 )
texture_idx = 0
flip = false
width = 1.0

[sub_resource type="Resource" id=9932]
script = ExtResource( 9 )
position = Vector2( 356, 132 )
point_in = Vector2( 0, 0 )
point_out = Vector2( 0, 0 )
properties = SubResource( 9931 )

[sub_resource type="Resource" id=9933]
script = ExtResource( 1 )
_points = {
12: SubResource( 9908 ),
21: SubResource( 9910 ),
24: SubResource( 9912 ),
25: SubResource( 9914 ),
26: SubResource( 9916 ),
27: SubResource( 9918 ),
28: SubResource( 9920 ),
29: SubResource( 9922 ),
30: SubResource( 9924 ),
31: SubResource( 9926 ),
32: SubResource( 9928 ),
33: SubResource( 9930 ),
34: SubResource( 9932 )
}
_point_order = [ 12, 21, 24, 25, 30, 29, 28, 26, 27, 33, 34, 32, 31 ]
_constraints = {
[ 12, 31 ]: 15
}
_next_key = 40
_material_overrides = {
}

[sub_resource type="StyleBoxFlat" id=613]
bg_color = Color( 0.6, 0.6, 0.6, 0.294118 )
draw_center = false
border_width_left = 4
border_width_top = 4
border_width_right = 4
border_width_bottom = 4

[node name="LevelCity" type="Node2D"]
script = ExtResource( 32 )
__meta__ = {
"_editor_description_": ""
}
level_type = 2

[node name="Background" type="Node2D" parent="."]
z_index = -4

[node name="BackgroundColor" type="ColorRect" parent="Background"]
visible = false
modulate = Color( 0.647059, 0.647059, 0.639216, 1 )
show_behind_parent = true
margin_right = 280.0
margin_bottom = 256.0
color = Color( 0, 0, 0, 1 )

[node name="BackgroundNoise" type="ColorRect" parent="Background"]
visible = false
modulate = Color( 1, 1, 1, 0.12549 )
show_behind_parent = true
material = SubResource( 603 )
margin_right = 280.0
margin_bottom = 256.0
color = Color( 1, 1, 1, 0 )

[node name="Background" type="ColorRect" parent="Background"]
visible = false
show_behind_parent = true
anchor_right = 1.0
anchor_bottom = 1.0
margin_right = 3000.0
margin_bottom = 2024.0
color = Color( 0, 0, 0, 1 )

[node name="Ground" type="Node2D" parent="."]
__meta__ = {
"_edit_group_": true,
"_edit_lock_": true
}

[node name="BackColor" type="ColorRect" parent="Ground"]
show_behind_parent = true
anchor_right = 1.0
anchor_bottom = 1.0
margin_right = 2560.0
margin_bottom = 1440.0
color = Color( 0.0901961, 0.0823529, 0.0705882, 1 )

[node name="SideWalk" type="TileMap" parent="Ground"]
material = ExtResource( 10 )
position = Vector2( 0, 8 )
tile_set = ExtResource( 48 )
cell_size = Vector2( 320, 320 )
format = 1
tile_data = PoolIntArray( -1, 1, 0, -65536, 1, 0, -65535, 1, 0, -65534, 1, 0, -65533, 1, 0, -65532, 1, 0, -65531, 0, 3, -65530, 1, 0, -65529, 1, 0, -65528, 1, 0, 65535, 1, 0, 0, 2, 0, 1, 1, 0, 2, 1, 0, 3, 1, 0, 4, 1, 0, 5, 1, 0, 6, 1, 0, 7, 1, 0, 8, 1, 0, 131071, 1, 0, 65536, 2, 0, 65537, 1, 0, 65538, 1, 0, 65539, 1, 0, 65540, 1, 0, 65541, 1, 0, 65542, 1, 0, 65543, 1, 0, 65544, 1, 0, 196607, 1, 0, 131072, 1, 0, 131073, 1, 0, 131074, 1, 0, 131075, 1, 0, 131076, 1, 0, 131077, 1, 0, 131078, 1, 0, 131079, 1, 0, 131080, 1, 0, 262143, 1, 0, 196608, 1, 0, 196609, 1, 0, 196610, 1, 0, 196611, 1, 0, 196612, 1, 0, 196613, 1, 0, 196614, 1, 0, 196615, 1, 0, 196616, 1, 0, 327679, 1, 0, 262144, 1, 0, 262145, 1, 0, 262146, 1, 0, 262147, 1, 0, 262148, 1, 0, 262149, 1, 0, 262150, 1, 0, 262151, 1, 0, 262152, 1, 0, 327680, 1, 0, 327681, 1, 0, 327682, 1, 0, 327683, 1, 0, 327684, 1, 0, 327685, 1, 0, 327686, 1, 0, 327687, 1, 0 )

[node name="SideWalkSmall" type="TileMap" parent="Ground"]
position = Vector2( 0, 8 )
tile_set = SubResource( 9238 )
cell_size = Vector2( 160, 160 )
format = 1
tile_data = PoolIntArray( -65532, 0, 0, -65531, 0, 0, -65530, 0, 0, -65529, 0, 0, -65528, 0, 0, -65523, 0, 0, -65522, 0, 0, -65521, 0, 0, 0, 0, 0, 1, 0, 0, 2, 0, 0, 3, 0, 0, 4, 0, 0, 5, 0, 0, 6, 0, 0, 7, 0, 0, 8, 0, 0, 13, 0, 0, 14, 0, 0, 15, 0, 0, 65536, 0, 0, 65537, 0, 0, 65538, 0, 0, 65543, 0, 0, 65544, 0, 0, 65550, 0, 0, 65551, 0, 0, 131072, 0, 0, 131073, 0, 0, 131074, 0, 0, 131079, 0, 0, 131080, 0, 0, 131086, 0, 0, 131087, 0, 0, 196608, 0, 0, 196609, 0, 0, 196610, 0, 0, 196611, 0, 0, 196615, 0, 0, 196616, 0, 0, 196622, 0, 0, 196623, 0, 0, 262145, 0, 0, 262146, 0, 0, 262147, 0, 0, 262148, 0, 0, 262149, 0, 0, 262150, 0, 0, 262155, 0, 0, 262156, 0, 0, 262158, 0, 0, 262159, 0, 0, 327681, 0, 0, 327682, 0, 0, 327684, 0, 0, 327685, 0, 0, 327686, 0, 0, 327690, 0, 0, 327691, 0, 0, 327692, 0, 0, 393218, 0, 0, 393225, 0, 0, 393226, 0, 0, 393227, 0, 0 )

[node name="StreetCurve" type="Node2D" parent="Ground"]
material = ExtResource( 22 )
script = ExtResource( 20 )
_points = SubResource( 9870 )
shape_material = ExtResource( 4 )
tessellation_stages = 4
tessellation_tolerence = 3.0
flip_edges = false
render_edges = true
collision_size = 32.0
collision_offset = 0.0
collision_polygon_node_path = NodePath("")

[node name="Street" type="TileMap" parent="Ground"]
tile_set = SubResource( 9841 )
cell_size = Vector2( 320, 320 )
format = 1
tile_data = PoolIntArray( -65531, 0, 1, 65542, 0, 131072 )

[node name="TerrainTextureRect" parent="Ground" instance=ExtResource( 47 )]
visible = false
material = ExtResource( 41 )
margin_right = 2560.0
margin_bottom = 1440.0

[node name="Lights" type="Node2D" parent="."]
visible = false

[node name="Light2D" type="Light2D" parent="Lights"]
position = Vector2( 168, 408 )
scale = Vector2( 3.63462, 3.63462 )
texture = ExtResource( 14 )
color = Color( 0.996078, 0.976471, 0.545098, 1 )

[node name="Light2D2" type="Light2D" parent="Lights"]
position = Vector2( 544, 1072 )
scale = Vector2( 4.7264, 4.7264 )
texture = ExtResource( 14 )
color = Color( 0.996078, 0.976471, 0.545098, 1 )

[node name="Light2D3" type="Light2D" parent="Lights"]
position = Vector2( 680, 672 )
scale = Vector2( 4.7264, 4.7264 )
texture = ExtResource( 14 )
color = Color( 0.996078, 0.976471, 0.545098, 1 )
shadow_enabled = true

[node name="Objects" type="Node2D" parent="."]

[node name="Objects" type="TileMap" parent="Objects"]
visible = false
z_index = -2
tile_set = ExtResource( 37 )
cell_size = Vector2( 8, 8 )
bake_navigation = true
format = 1

[node name="Buildings" type="Node2D" parent="."]

[node name="Building" parent="Buildings" instance=ExtResource( 52 )]
position = Vector2( 720, 816 )

[node name="Areas" type="Node2D" parent="."]
position = Vector2( 64, 576 )

[node name="Edge" type="TileMap" parent="."]
visible = false
z_index = 2
tile_set = ExtResource( 27 )
cell_size = Vector2( 8, 8 )
collision_layer = 9
format = 1
script = ExtResource( 21 )

[node name="EdgeShadows" type="ColorRect" parent="Edge"]
material = SubResource( 619 )
margin_left = -24.0
margin_top = -72.0
margin_right = 679.0
margin_bottom = 367.0

[node name="Pixelate" type="ColorRect" parent="."]
visible = false
material = SubResource( 1126 )
margin_left = 56.0
margin_top = 8.0
margin_right = 1704.0
margin_bottom = 1040.0

[node name="Dither" type="ColorRect" parent="."]
visible = false
material = ExtResource( 26 )
margin_left = 56.0
margin_top = 8.0
margin_right = 1704.0
margin_bottom = 896.0

[node name="PixelateAlt" type="ColorRect" parent="."]
visible = false
material = SubResource( 5159 )
margin_left = 56.0
margin_top = 8.0
margin_right = 1704.0
margin_bottom = 1040.0
__meta__ = {
"_edit_lock_": true
}

[node name="PixelateAlt2" type="ColorRect" parent="."]
visible = false
material = SubResource( 5161 )
margin_left = 56.0
margin_top = 8.0
margin_right = 1704.0
margin_bottom = 1040.0
__meta__ = {
"_edit_lock_": true
}

[node name="Normals_SSD_shader" type="ColorRect" parent="."]
visible = false
material = SubResource( 2925 )
margin_left = 56.0
margin_top = 8.0
margin_right = 1704.0
margin_bottom = 1040.0

[node name="CanvasModulate2" type="CanvasModulate" parent="."]
visible = false
position = Vector2( 56, 8 )
color = Color( 0.290196, 0.321569, 0.486275, 1 )

[node name="RaceStart" type="Node2D" parent="."]
position = Vector2( 552, 1080 )
__meta__ = {
"_edit_group_": true
}

[node name="StartLights" parent="RaceStart" instance=ExtResource( 53 )]
position = Vector2( -7.62939e-06, -32 )

[node name="StartPositions" type="Node2D" parent="RaceStart"]
modulate = Color( 1, 1, 1, 0.470588 )
position = Vector2( 0, 48 )

[node name="StartPosition1" type="Position2D" parent="RaceStart/StartPositions"]
position = Vector2( -108, 8 )
rotation = -1.5708

[node name="Label" type="Label" parent="RaceStart/StartPositions/StartPosition1"]
margin_left = 5.0
margin_top = 20.0
margin_right = 51.0
margin_bottom = 68.0
rect_rotation = 90.0
rect_scale = Vector2( 0.25, 0.25 )
theme = ExtResource( 8 )
text = "P1"
align = 1

[node name="Bolt" type="Sprite" parent="RaceStart/StartPositions/StartPosition1"]
texture = ExtResource( 5 )

[node name="StartPosition2" type="Position2D" parent="RaceStart/StartPositions"]
position = Vector2( -36, 8 )
rotation = -1.5708

[node name="Label" type="Label" parent="RaceStart/StartPositions/StartPosition2"]
margin_left = 5.0
margin_top = 20.0
margin_right = 58.0
margin_bottom = 68.0
rect_rotation = 90.0
rect_scale = Vector2( 0.25, 0.25 )
theme = ExtResource( 8 )
text = "P2"
align = 1

[node name="Bolt" type="Sprite" parent="RaceStart/StartPositions/StartPosition2"]
material = SubResource( 621 )
texture = ExtResource( 5 )

[node name="StartPosition3" type="Position2D" parent="RaceStart/StartPositions"]
position = Vector2( 36, 8 )
rotation = -1.5708

[node name="Label" type="Label" parent="RaceStart/StartPositions/StartPosition3"]
margin_left = 6.0
margin_top = 20.0
margin_right = 59.0
margin_bottom = 68.0
rect_rotation = 90.0
rect_scale = Vector2( 0.25, 0.25 )
theme = ExtResource( 8 )
text = "P3"
align = 1

[node name="Bolt" type="Sprite" parent="RaceStart/StartPositions/StartPosition3"]
material = SubResource( 621 )
texture = ExtResource( 5 )

[node name="StartPosition4" type="Position2D" parent="RaceStart/StartPositions"]
position = Vector2( 108, 8 )
rotation = -1.5708

[node name="Label" type="Label" parent="RaceStart/StartPositions/StartPosition4"]
margin_left = 5.0
margin_top = 20.0
margin_right = 59.0
margin_bottom = 68.0
rect_rotation = 90.0
rect_scale = Vector2( 0.25, 0.25 )
theme = ExtResource( 8 )
text = "P4"
align = 1

[node name="Bolt" type="Sprite" parent="RaceStart/StartPositions/StartPosition4"]
material = SubResource( 621 )
texture = ExtResource( 5 )

[node name="StartLine" type="Area2D" parent="RaceStart"]
monitoring = false
monitorable = false

[node name="CollisionPolygon2D" type="CollisionShape2D" parent="RaceStart/StartLine"]
visible = false
position = Vector2( 0, 4 )
shape = SubResource( 622 )
disabled = true

[node name="ColorRect" type="ColorRect" parent="RaceStart/StartLine"]
margin_left = -144.0
margin_right = 144.0
margin_bottom = 8.0

[node name="CameraPosition" type="Position2D" parent="RaceStart"]
position = Vector2( 0, 48 )

[node name="DriveInPosition" type="Position2D" parent="RaceStart"]
position = Vector2( 0, 416 )
__meta__ = {
"_edit_group_": true
}

[node name="Line2d" type="Line2D" parent="RaceStart/DriveInPosition"]
position = Vector2( -72, 0 )
points = PoolVector2Array( 0, 0, 144, 0 )
width = 2.0
default_color = Color( 1, 0, 1, 1 )

[node name="Checkpoint" type="Area2D" parent="."]
position = Vector2( 2153, 944 )
monitoring = false
monitorable = false
__meta__ = {
"_edit_group_": true
}

[node name="CollisionPolygon2D" type="CollisionShape2D" parent="Checkpoint"]
position = Vector2( 0, 4 )
shape = SubResource( 514 )

[node name="HBoxContainer" type="HBoxContainer" parent="Checkpoint"]
margin_left = -144.0
margin_right = 144.0
margin_bottom = 8.0
grow_horizontal = 2
custom_constants/separation = 0

[node name="Sprite2" type="TextureRect" parent="Checkpoint/HBoxContainer"]
margin_right = 32.0
margin_bottom = 8.0
texture = SubResource( 515 )

[node name="Sprite3" type="TextureRect" parent="Checkpoint/HBoxContainer"]
margin_left = 32.0
margin_right = 64.0
margin_bottom = 8.0
texture = SubResource( 515 )

[node name="Sprite4" type="TextureRect" parent="Checkpoint/HBoxContainer"]
margin_left = 64.0
margin_right = 96.0
margin_bottom = 8.0
texture = SubResource( 515 )

[node name="Sprite5" type="TextureRect" parent="Checkpoint/HBoxContainer"]
margin_left = 96.0
margin_right = 128.0
margin_bottom = 8.0
texture = SubResource( 515 )

[node name="Sprite6" type="TextureRect" parent="Checkpoint/HBoxContainer"]
margin_left = 128.0
margin_right = 160.0
margin_bottom = 8.0
texture = SubResource( 515 )

[node name="Sprite7" type="TextureRect" parent="Checkpoint/HBoxContainer"]
margin_left = 160.0
margin_right = 192.0
margin_bottom = 8.0
texture = SubResource( 515 )

[node name="Sprite8" type="TextureRect" parent="Checkpoint/HBoxContainer"]
margin_left = 192.0
margin_right = 224.0
margin_bottom = 8.0
texture = SubResource( 515 )

[node name="Sprite9" type="TextureRect" parent="Checkpoint/HBoxContainer"]
margin_left = 224.0
margin_right = 256.0
margin_bottom = 8.0
texture = SubResource( 515 )

[node name="Sprite10" type="TextureRect" parent="Checkpoint/HBoxContainer"]
margin_left = 256.0
margin_right = 288.0
margin_bottom = 8.0
texture = SubResource( 515 )

[node name="Sprite11" type="TextureRect" parent="Checkpoint/HBoxContainer"]
margin_left = 288.0
margin_right = 320.0
margin_bottom = 8.0
texture = SubResource( 515 )

[node name="Sprite12" type="TextureRect" parent="Checkpoint/HBoxContainer"]
margin_left = 320.0
margin_right = 352.0
margin_bottom = 8.0
texture = SubResource( 515 )

[node name="Sprite13" type="TextureRect" parent="Checkpoint/HBoxContainer"]
margin_left = 352.0
margin_right = 384.0
margin_bottom = 8.0
texture = SubResource( 515 )

[node name="Sprite14" type="TextureRect" parent="Checkpoint/HBoxContainer"]
margin_left = 384.0
margin_right = 416.0
margin_bottom = 8.0
texture = SubResource( 515 )

[node name="Sprite15" type="TextureRect" parent="Checkpoint/HBoxContainer"]
margin_left = 416.0
margin_right = 448.0
margin_bottom = 8.0
texture = SubResource( 515 )

[node name="Sprite16" type="TextureRect" parent="Checkpoint/HBoxContainer"]
margin_left = 448.0
margin_right = 480.0
margin_bottom = 8.0
texture = SubResource( 515 )

[node name="Sprite17" type="TextureRect" parent="Checkpoint/HBoxContainer"]
margin_left = 480.0
margin_right = 512.0
margin_bottom = 8.0
texture = SubResource( 515 )

[node name="Sprite18" type="TextureRect" parent="Checkpoint/HBoxContainer"]
margin_left = 512.0
margin_right = 544.0
margin_bottom = 8.0
texture = SubResource( 515 )

[node name="RaceFinish" type="Node2D" parent="."]
visible = false
position = Vector2( 552, 1064 )
__meta__ = {
"_edit_group_": true
}

[node name="FinishLine" type="Area2D" parent="RaceFinish"]
position = Vector2( 0, 16 )
monitoring = false
monitorable = false
__meta__ = {
"_edit_group_": true
}

[node name="CollisionPolygon2D" type="CollisionShape2D" parent="RaceFinish/FinishLine"]
position = Vector2( -0.00012207, 4 )
shape = SubResource( 2923 )

[node name="HBoxContainer" type="HBoxContainer" parent="RaceFinish/FinishLine"]
margin_left = -168.0
margin_right = 168.0
margin_bottom = 8.0
grow_horizontal = 2
custom_constants/separation = 0
alignment = 1

[node name="Sprite" type="TextureRect" parent="RaceFinish/FinishLine/HBoxContainer"]
margin_left = 8.0
margin_right = 40.0
margin_bottom = 8.0
texture = SubResource( 623 )

[node name="Sprite2" type="TextureRect" parent="RaceFinish/FinishLine/HBoxContainer"]
margin_left = 40.0
margin_right = 72.0
margin_bottom = 8.0
texture = SubResource( 623 )

[node name="Sprite3" type="TextureRect" parent="RaceFinish/FinishLine/HBoxContainer"]
margin_left = 72.0
margin_right = 104.0
margin_bottom = 8.0
texture = SubResource( 623 )

[node name="Sprite4" type="TextureRect" parent="RaceFinish/FinishLine/HBoxContainer"]
margin_left = 104.0
margin_right = 136.0
margin_bottom = 8.0
texture = SubResource( 623 )

[node name="Sprite5" type="TextureRect" parent="RaceFinish/FinishLine/HBoxContainer"]
margin_left = 136.0
margin_right = 168.0
margin_bottom = 8.0
texture = SubResource( 623 )

[node name="Sprite6" type="TextureRect" parent="RaceFinish/FinishLine/HBoxContainer"]
margin_left = 168.0
margin_right = 200.0
margin_bottom = 8.0
texture = SubResource( 623 )

[node name="Sprite7" type="TextureRect" parent="RaceFinish/FinishLine/HBoxContainer"]
margin_left = 200.0
margin_right = 232.0
margin_bottom = 8.0
texture = SubResource( 623 )

[node name="Sprite8" type="TextureRect" parent="RaceFinish/FinishLine/HBoxContainer"]
margin_left = 232.0
margin_right = 264.0
margin_bottom = 8.0
texture = SubResource( 623 )

[node name="Sprite9" type="TextureRect" parent="RaceFinish/FinishLine/HBoxContainer"]
margin_left = 264.0
margin_right = 296.0
margin_bottom = 8.0
texture = SubResource( 623 )

[node name="Sprite10" type="TextureRect" parent="RaceFinish/FinishLine/HBoxContainer"]
margin_left = 296.0
margin_right = 328.0
margin_bottom = 8.0
texture = SubResource( 623 )

[node name="CameraPosition" type="Position2D" parent="RaceFinish"]
position = Vector2( 0, -16 )

[node name="DriveOutPosition" type="Position2D" parent="RaceFinish"]
position = Vector2( 0, -256 )
__meta__ = {
"_edit_group_": true
}

[node name="Line2d" type="Line2D" parent="RaceFinish/DriveOutPosition"]
position = Vector2( -72, 0 )
points = PoolVector2Array( 0, 0, 144, 0 )
width = 2.0
default_color = Color( 1, 0, 1, 1 )

[node name="RacingTrack" type="Path2D" parent="."]
curve = SubResource( 8635 )
script = ExtResource( 28 )

[node name="BoltTracker" type="PathFollow2D" parent="RacingTrack"]
position = Vector2( 624, 1104 )
rotation = -1.46016
script = ExtResource( 33 )

[node name="CrossIndicator" type="Sprite" parent="RacingTrack/BoltTracker"]
scale = Vector2( 2, 2 )
texture = ExtResource( 6 )

[node name="NavigationPolygonInstance" type="NavigationPolygonInstance" parent="."]
visible = false
navpoly = SubResource( 6258 )
__meta__ = {
"_edit_lock_": true
}

[node name="LevelLimits" type="Panel" parent="."]
margin_right = 2560.0
margin_bottom = 1440.0
theme = ExtResource( 8 )
__meta__ = {
"_edit_lock_": true
}

[node name="_obs" type="Node2D" parent="."]
visible = false

[node name="MountsTexture" type="Node2D" parent="_obs"]

[node name="MountMidleShade" type="Node2D" parent="_obs/MountsTexture"]
script = ExtResource( 13 )
_points = SubResource( 9889 )
shape_material = ExtResource( 24 )
tessellation_stages = 5
tessellation_tolerence = 4.0
flip_edges = false
render_edges = true
collision_size = 32.0
collision_offset = 0.0
collision_polygon_node_path = NodePath("")

[node name="MountMidle" type="Node2D" parent="_obs/MountsTexture"]
script = ExtResource( 13 )
_points = SubResource( 9906 )
shape_material = SubResource( 1603 )
tessellation_stages = 5
tessellation_tolerence = 4.0
flip_edges = false
render_edges = true
collision_size = 32.0
collision_offset = 0.0
collision_polygon_node_path = NodePath("")

[node name="MountAround" type="Node2D" parent="_obs/MountsTexture"]
script = ExtResource( 13 )
_points = SubResource( 9933 )
shape_material = SubResource( 1603 )
tessellation_stages = 5
tessellation_tolerence = 4.0
flip_edges = false
render_edges = true
collision_size = 32.0
collision_offset = 0.0
collision_polygon_node_path = NodePath("")

[node name="_level_tiles_shader" type="ColorRect" parent="_obs"]
visible = false
material = ExtResource( 31 )
margin_left = -23.0
margin_top = -41.0
margin_right = 680.0
margin_bottom = 398.0

[node name="Floor" type="TileMap" parent="_obs"]
visible = false
z_index = -3
tile_set = ExtResource( 25 )
cell_size = Vector2( 8, 8 )
bake_navigation = true
format = 1

[node name="_ScreenSize" type="Panel" parent="."]
modulate = Color( 0.952941, 0.356863, 0.498039, 1 )
margin_right = 1280.0
margin_bottom = 720.0
custom_styles/panel = SubResource( 613 )
__meta__ = {
"_edit_lock_": true
}

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Node2D3" type="Node2D" parent="."]

[connection signal="resized" from="Edge/EdgeShadows" to="Edge" method="_on_EdgeShadows_resized"]
[connection signal="body_entered" from="Checkpoint" to="." method="_on_Checkpoint_body_entered"]
[connection signal="body_entered" from="RaceFinish/FinishLine" to="." method="_on_FinishLine_body_entered"]
